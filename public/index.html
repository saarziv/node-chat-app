<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>chat-app</title>
</head>
<body>
<h1>hello world !</h1>
<script src="/socket.io/socket.io.js"></script>
<script>
    // this function creates the socket to the server
    // this socket will be the way the client and the server will communicate.
    let socket = io();
    //if suddenly the server shuts down the client will still try to keep this socket online and will keep sending req to the server.
    //(visible in network tab of dev tools.)
    //these to event listeners will fire when we connect / disconnect from the server.
    //notice that im not using arrow functions on the client, because only chrome supports es6 (it will only work on chrome..)
    socket.on('connect',function () {
        console.log("connected to the server.");

        socket.emit('createMessage',{
            from: "Nesi",
            text:"Hello LEVANAA"
        })
    });
    socket.on('newMessage',function (message) {
        console.log("message",message);
    });

    socket.on('disconnect',function (){
        console.log("disconnected from the server.");
    });

</script>
</body>
</html>